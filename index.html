<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Mindset Quiz - Find Your Financial Persona</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #4285f4 0%, #1e3c72 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
            overflow-x: hidden;
        }

        .survey-container {
            background: white;
            border-radius: 24px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
            padding: 60px 50px;
            max-width: 700px;
            width: 95%;
            text-align: center;
            position: relative;
            overflow: hidden;
            margin: 20px;
        }

        .survey-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, #4285f4, #1e3c72, #4CAF50);
        }

        .company-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f4f8;
        }

        .company-logo {
            width: 60px;
            height: 60px;
            object-fit: contain;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(30, 60, 114, 0.15);
        }

        .company-name {
            font-size: 28px;
            font-weight: 700;
            color: #4285f4;
            letter-spacing: -0.5px;
        }

        .brand-header {
            margin-bottom: 40px;
        }

        .brand-title {
            font-size: 32px;
            font-weight: 700;
            color: #4285f4;
            margin-bottom: 10px;
        }

        .brand-subtitle {
            font-size: 18px;
            color: #666;
            line-height: 1.5;
            max-width: 500px;
            margin: 0 auto;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e8f4f8;
            border-radius: 4px;
            margin-bottom: 40px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4285f4, #1e3c72);
            border-radius: 4px;
            width: 0%;
            transition: width 0.6s ease;
        }

        .form-container, .question-container {
            display: none;
            animation: slideIn 0.6s ease-out;
        }

        .form-container.active, .question-container.active {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .question-number {
            color: #4285f4;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 26px;
            font-weight: 600;
            margin-bottom: 40px;
            line-height: 1.4;
            color: #1a1a1a;
        }

        .form-fields {
            display: grid;
            gap: 20px;
            margin-bottom: 40px;
            text-align: left;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-label {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .form-input {
            padding: 16px 20px;
            border: 2px solid #e1e8ed;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #fafbfc;
        }

        .form-input:focus {
            outline: none;
            border-color: #4285f4;
            background: white;
            box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.1);
        }

        .form-input.error {
            border-color: #e74c3c;
            background: #fdf2f2;
        }

        .privacy-disclaimer {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            margin-top: 25px;
            font-size: 14px;
            color: #64748b;
            line-height: 1.6;
            text-align: left;
        }

        .privacy-disclaimer .privacy-title {
            font-weight: 600;
            color: #475569;
            margin-bottom: 8px;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 40px;
        }

        .option {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 16px;
            padding: 20px 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            font-weight: 500;
            text-align: left;
            position: relative;
            overflow: hidden;
        }

        .option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(66, 133, 244, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .option:hover {
            background: #e8f0fe;
            border-color: #4285f4;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(66, 133, 244, 0.15);
        }

        .option:hover::before {
            left: 100%;
        }

        .option.selected {
            background: linear-gradient(135deg, #4285f4, #1e3c72);
            color: white;
            border-color: #4285f4;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(66, 133, 244, 0.3);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }

        .btn {
            background: linear-gradient(135deg, #4285f4, #1e3c72);
            color: white;
            border: none;
            border-radius: 14px;
            padding: 16px 32px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(66, 133, 244, 0.3);
        }

        .btn:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn:disabled::before {
            display: none;
        }

        .btn-back {
            background: transparent;
            color: #4285f4;
            border: 2px solid #4285f4;
        }

        .btn-back:hover {
            background: #4285f4;
            color: white;
        }

        .results-container {
            display: none;
            text-align: center;
        }

        .results-container.active {
            display: block;
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .persona-badge {
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(135deg, #4285f4, #1e3c72);
            color: white;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(66, 133, 244, 0.3);
        }

        .persona-title {
            font-size: 36px;
            font-weight: 700;
            color: #4285f4;
            margin-bottom: 15px;
        }

        .score-display {
            font-size: 20px;
            color: #666;
            margin-bottom: 30px;
        }

        .persona-message {
            background: #f8fafc;
            border-left: 4px solid #4285f4;
            padding: 30px;
            border-radius: 12px;
            text-align: left;
            line-height: 1.7;
            font-size: 16px;
            color: #444;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        .cta-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        .cta-btn {
            padding: 16px 28px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .cta-primary {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
        }

        .cta-secondary {
            background: transparent;
            color: #4285f4;
            border: 2px solid #4285f4;
        }

        .cta-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .restart-btn {
            margin-top: 20px;
            background: #6c757d;
            font-size: 14px;
            padding: 12px 24px;
        }

        @media (max-width: 768px) {
            .survey-container {
                padding: 40px 25px;
                margin: 10px;
            }

            .brand-title {
                font-size: 26px;
            }

            .question-text {
                font-size: 22px;
            }

            .persona-title {
                font-size: 28px;
            }

            .cta-buttons {
                flex-direction: column;
                align-items: center;
            }

            .company-header {
                flex-direction: column;
                gap: 10px;
            }

            .company-logo {
                width: 50px;
                height: 50px;
            }

            .company-name {
                font-size: 22px;
            }

            .cta-btn {
                width: 100%;
                max-width: 300px;
            }
        }

        .validation-error {
            color: #e74c3c;
            font-size: 14px;
            margin-top: 5px;
            text-align: left;
            display: none;
        }
    </style>
</head>
<body>
    <div class="survey-container">
        <!-- Company Header -->
        <div class="company-header">
            <img src="https://www.shiftalt.capital/logo.jpg" alt="ShiftAlt Capital Logo" class="company-logo">
            <div class="company-name">ShiftAlt Capital</div>
        </div>

        <div class="brand-header">
            <div class="brand-title">Market Mindset Quiz</div>
            <div class="brand-subtitle">Find Your Financial Persona. Discover what kind of investor you really are and shape your financial journey.</div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <!-- Contact Form -->
        <div class="form-container active" id="contactForm">
            <div class="question-number">Let's get started</div>
            <div class="question-text">Tell us a bit about yourself</div>
            <div class="form-fields">
                <div class="form-group">
                    <label class="form-label">First Name *</label>
                    <input type="text" class="form-input" id="firstName" required>
                    <div class="validation-error" id="firstNameError">Please enter your first name</div>
                </div>
                <div class="form-group">
                    <label class="form-label">Last Name *</label>
                    <input type="text" class="form-input" id="lastName" required>
                    <div class="validation-error" id="lastNameError">Please enter your last name</div>
                </div>
                <div class="form-group">
                    <label class="form-label">Email ID *</label>
                    <input type="email" class="form-input" id="email" required>
                    <div class="validation-error" id="emailError">Please enter a valid email address</div>
                </div>
                <div class="form-group">
                    <label class="form-label">Phone Number *</label>
                    <input type="tel" class="form-input" id="phone" required>
                    <div class="validation-error" id="phoneError">Please enter your phone number</div>
                </div>
            </div>
            
            <!-- Privacy Disclaimer -->
            <div class="privacy-disclaimer">
                <div class="privacy-title">Privacy & Data Protection</div>
                We will use your contact details solely for sending our investment-related communications and educational content. Your information will never be shared with third parties. You can unsubscribe at any time. By proceeding, you consent to receive communications from ShiftAlt Capital regarding investment opportunities and market insights.
            </div>
        </div>

        <!-- Quiz Questions -->
        <div class="question-container" id="question-0">
            <div class="question-number">Question 1 of 12</div>
            <div class="question-text">You just received â‚¹10 lakh. What's your first move?</div>
            <div class="options">
                <div class="option" data-value="1">Ask a friend</div>
                <div class="option" data-value="2">Deposit it in a bank FD</div>
                <div class="option" data-value="3">Put it in index mutual funds -- reliable and easy</div>
                <div class="option" data-value="4">Pick top-performing Indian stocks yourself</div>
                <div class="option" data-value="5">Pick top-performing US stocks yourself</div>
            </div>
        </div>

        <div class="question-container" id="question-1">
            <div class="question-number">Question 2 of 12</div>
            <div class="question-text">What kind of content do you usually consume about money?</div>
            <div class="options">
                <div class="option" data-value="2">Personal finance Instagram reels or influencers</div>
                <div class="option" data-value="3">YouTube videos on hot stocks and penny picks</div>
                <div class="option" data-value="4">Business news and long-form blogs</div>
                <div class="option" data-value="1">I don't usually follow finance content</div>
                <div class="option" data-value="5">Mix of the above</div>
            </div>
        </div>

        <div class="question-container" id="question-2">
            <div class="question-number">Question 3 of 12</div>
            <div class="question-text">If a friend told you they made 30% return last year in US ETFs, how would you feel?</div>
            <div class="options">
                <div class="option" data-value="5">Excited and ready to learn more or replicate it</div>
                <div class="option" data-value="3">Open to exploring, if it's explained well</div>
                <div class="option" data-value="3">Slightly FOMO, but unsure I'd try</div>
                <div class="option" data-value="2">Curious but still hesitant</div>
                <div class="option" data-value="1">Skeptical and uninterested</div>
            </div>
        </div>

        <div class="question-container" id="question-3">
            <div class="question-number">Question 4 of 12</div>
            <div class="question-text">How do you feel when the value of your investment drops by 10% in a short period (e.g., 1 month)?</div>
            <div class="options">
                <div class="option" data-value="3">I wait it out and monitor closely</div>
                <div class="option" data-value="1">I feel anxious and want to withdraw immediately</div>
                <div class="option" data-value="2">I feel concerned and start questioning my choices</div>
                <div class="option" data-value="5">I feel excited about the opportunity to buy more at a discount</div>
                <div class="option" data-value="4">I view it as a temporary phase and may consider investing more</div>
            </div>
        </div>

        <div class="question-container" id="question-4">
            <div class="question-number">Question 5 of 12</div>
            <div class="question-text">How long do you usually keep your investments?</div>
            <div class="options">
                <div class="option" data-value="1">I like quick results hence prefer short term - less than a year</div>
                <div class="option" data-value="2">1-3 years -- mid-term is fine</div>
                <div class="option" data-value="4">5+ years -- I'm a long-term thinker</div>
                <div class="option" data-value="3">All of the above</div>
                <div class="option" data-value="1">None of the above</div>
            </div>
        </div>

        <div class="question-container" id="question-5">
            <div class="question-number">Question 6 of 12</div>
            <div class="question-text">If you were to invest in U.S. markets, what would your reason be?</div>
            <div class="options">
                <div class="option" data-value="5">Dollar returns -- I want to hedge INR</div>
                <div class="option" data-value="4">U.S. companies are the world's best</div>
                <div class="option" data-value="2">Indian markets are better -- no need to look abroad</div>
                <div class="option" data-value="1">Not sure yet -- still learning</div>
                <div class="option" data-value="3">Invest in both US and Indian markets</div>
            </div>
        </div>

        <div class="question-container" id="question-6">
            <div class="question-number">Question 7 of 12</div>
            <div class="question-text">How do you usually invest your money?</div>
            <div class="options">
                <div class="option" data-value="4">Pick my own stocks on Zerodha / Groww etc.</div>
                <div class="option" data-value="3">Invest in mutual funds via an advisor or app</div>
                <div class="option" data-value="2">Fixed deposits or gold -- safe and familiar</div>
                <div class="option" data-value="5">All of the above</div>
                <div class="option" data-value="1">None of the above</div>
            </div>
        </div>

        <div class="question-container" id="question-7">
            <div class="question-number">Question 8 of 12</div>
            <div class="question-text">What excites you more?</div>
            <div class="options">
                <div class="option" data-value="4">Finding hidden stock gems before others</div>
                <div class="option" data-value="2">Watching my SIPs grow slowly but surely</div>
                <div class="option" data-value="1">Knowing my money is safe and untouched</div>
                <div class="option" data-value="3">Investing in global brands I love</div>
                <div class="option" data-value="5">Options a, b and d above</div>
            </div>
        </div>

        <div class="question-container" id="question-8">
            <div class="question-number">Question 9 of 12</div>
            <div class="question-text">How do you usually decide what to invest in?</div>
            <div class="options">
                <div class="option" data-value="2">Based on news and trending stocks</div>
                <div class="option" data-value="3">Based on advisor's recommendation</div>
                <div class="option" data-value="4">Based on my research and diversification goals</div>
                <div class="option" data-value="1">I don't yet know how to choose</div>
                <div class="option" data-value="5">Options a, b and c above</div>
            </div>
        </div>

        <div class="question-container" id="question-9">
            <div class="question-number">Question 10 of 12</div>
            <div class="question-text">Which of these statements best describes your past experience with equity investments?</div>
            <div class="options">
                <div class="option" data-value="1">I've never invested in stocks or mutual funds</div>
                <div class="option" data-value="2">I've tried, but felt uncomfortable with the volatility</div>
                <div class="option" data-value="3">I've invested but mostly rely on others to manage it</div>
                <div class="option" data-value="4">I have experience and feel moderately confident</div>
                <div class="option" data-value="5">I've actively invested and feel very comfortable managing risk</div>
            </div>
        </div>

        <div class="question-container" id="question-10">
            <div class="question-number">Question 11 of 12</div>
            <div class="question-text">How confident are you in your understanding of the risks and benefits of investing in US stocks/ETFs?</div>
            <div class="options">
                <div class="option" data-value="2">Slightly aware but uncomfortable</div>
                <div class="option" data-value="4">Confident, but I still prefer guidance</div>
                <div class="option" data-value="3">I understand the basics</div>
                <div class="option" data-value="5">Very confident --- I do my own analysis or follow a clear strategy</div>
                <div class="option" data-value="1">Not confident at all</div>
            </div>
        </div>

        <div class="question-container" id="question-11">
            <div class="question-number">Question 12 of 12</div>
            <div class="question-text">How important is "capital protection" versus "wealth growth" in your mind?</div>
            <div class="options">
                <div class="option" data-value="2">Mostly protection --- only small growth is okay</div>
                <div class="option" data-value="4">I lean towards growth but with informed risk</div>
                <div class="option" data-value="3">Balance of growth and safety is ideal</div>
                <div class="option" data-value="5">Growth is my top priority --- I accept volatility</div>
                <div class="option" data-value="1">100% protection --- I don't want to lose money</div>
            </div>
        </div>

        <!-- Results Screen -->
        <div class="results-container" id="results">
            <div class="persona-badge" id="personaBadge">Your Financial Persona</div>
            <div class="persona-title" id="personaTitle">Strategic Investor</div>
            <div class="score-display">Your Score: <span id="scoreValue">0</span>/60</div>
            <div class="persona-message" id="personaMessage">
                Your personalized message will appear here...
            </div>
            <div class="cta-buttons">
                <button class="cta-btn cta-primary" onclick="bookCall()">Schedule 1-on-1 Call</button>
                <button class="cta-btn cta-secondary" onclick="joinWhatsApp()">Join WhatsApp Community</button>
            </div>
            <button class="btn restart-btn" onclick="restartSurvey()">Retake Quiz</button>
        </div>

        <!-- Navigation -->
        <div class="navigation" id="navigation">
            <button class="btn btn-back" id="backBtn" onclick="previousStep()" disabled>Back</button>
            <button class="btn" id="nextBtn" onclick="nextStep()" disabled>Start Quiz</button>
        </div>
    </div>

    <script>
        let currentStep = -1; // -1 for contact form, 0-11 for questions
        let totalQuestions = 12;
        let answers = {};
        let userInfo = {};
        let totalScore = 0;

        const personaData = {
            'Cautious Saver': {
                range: [12, 19],
                message: `Your Money Mindset Quiz results show you're a Cautious Saver, someone who values stability and security above all else when it comes to your finances.

You prefer the comfort of fixed deposits and traditional savings methods, and that's completely understandable. However, exploring carefully selected mutual funds and understanding basic investment principles could help you grow your wealth while still maintaining the security you value.

At ShiftAlt Capital, we understand your preference for safety-first investing. While U.S. markets might seem overwhelming now, we're here when you're ready to take small, confident steps toward diversification.`
            },
            'Comfort Seeker': {
                range: [20, 27],
                message: `Your Money Mindset Quiz results show you're a Comfort Seeker, someone who values stability, consistency, and clarity when it comes to growing wealth.

You already have a solid foundation with mutual funds, and that's a great start. Now, it's time to take the next step: exploring how the U.S. public markets can offer you geographical diversification, dollar appreciation from innovation driven businesses --- all while staying aligned with your comfort-first mindset.

At ShiftAlt Capital, we specialize in helping investors like you confidently expand their portfolios beyond India, without the overwhelm. We'd like to invite you for a 1-on-1 call with our US market experts to understand your goals and risk appetite, and whether and how investing in the US public markets can help you meet your goals within your risk taking ability - and we'll do it in plain English.`
            },
            'Guided Explorer': {
                range: [28, 35],
                message: `Your Money Mindset Quiz results show you're a Guided Explorer: someone who enjoys making investment decisions, follows financial content, and isn't afraid to take a bit of risk --- especially when it's informed.

You've already built confidence picking stocks in India. Now, imagine what's possible when you tap into the U.S. public markets --- home to companies like Apple, Nvidia, Tesla, and many more innovation-driven giants.

At ShiftAlt Capital, we're here to help you bridge the gap between interest and action --- giving you the tools, research, and expert support to confidently explore U.S. investing with the same conviction you apply in India. You're already ahead of the curve. Let's build on that momentum and help you go global --- with confidence and clarity.`
            },
            'Confident Builder': {
                range: [36, 43],
                message: `Your Money Mindset Quiz results tell us you're a Confident Builder.

That means you've got the mindset, the intent, and the ambition to explore U.S. public markets --- you just need the right support to get started.

At ShiftAlt Capital, we specialize in helping Indian investors like you take the leap --- without the jargon, the overwhelm, or the guesswork. We'd like to invite you for a 1-on-1 call with our US market experts to understand your goals and risk appetite, discuss ideas, tools and how to get started with a framework that suits your style - and we'll do it with step-by-step guidance and real-time support. Whether it's understanding how to open an account, choosing the right stocks or ETFs, or navigating tax implications. You're closer than you think.`
            },
            'Strategic Investor': {
                range: [44, 60],
                message: `Your Money Mindset Quiz results place you among a rare group: the Strategic Investor.

You're already globally invested, financially literate, and focused on the long game --- a mindset we deeply resonate with at ShiftAlt Capital. Our role? To help you optimize, streamline, and stay ahead as you grow your global portfolio, particularly in the U.S. public markets.

From tax-efficient structures and currency strategies to sector rotation insights and thematic opportunities --- we go beyond basics to provide institutional-grade guidance tailored for high net worth individuals like you. We look forward to partnering with you as you continue building a truly global and resilient portfolio.`
            }
        };

        function updateProgress() {
            const totalSteps = totalQuestions + 1; // +1 for contact form
            const progress = ((currentStep + 2) / (totalSteps + 1)) * 100;
            document.getElementById('progressFill').style.width = Math.min(progress, 100) + '%';
        }

        function validateForm() {
            let isValid = true;
            const fields = ['firstName', 'lastName', 'email', 'phone'];
            
            fields.forEach(field => {
                const input = document.getElementById(field);
                const error = document.getElementById(field + 'Error');
                
                input.classList.remove('error');
                error.style.display = 'none';
                
                if (!input.value.trim()) {
                    input.classList.add('error');
                    error.style.display = 'block';
                    isValid = false;
                } else if (field === 'email' && !isValidEmail(input.value)) {
                    input.classList.add('error');
                    error.textContent = 'Please enter a valid email address';
                    error.style.display = 'block';
                    isValid = false;
                }
            });
            
            return isValid;
        }

        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        function showStep(stepIndex) {
            // Hide all steps
            document.getElementById('contactForm').classList.remove('active');
            document.querySelectorAll('.question-container').forEach(q => {
                q.classList.remove('active');
            });
            
            if (stepIndex === -1) {
                // Show contact form
                document.getElementById('contactForm').classList.add('active');
                document.getElementById('nextBtn').textContent = 'Start Quiz';
                document.getElementById('nextBtn').disabled = true;
            } else {
                // Show question
                document.getElementById(`question-${stepIndex}`).classList.add('active');
                
                if (stepIndex === totalQuestions - 1) {
                    document.getElementById('nextBtn').textContent = 'See Results';
                } else {
                    document.getElementById('nextBtn').textContent = 'Next';
                }
                
                // Check if current question is answered
                const isAnswered = answers[stepIndex] !== undefined;
                document.getElementById('nextBtn').disabled = !isAnswered;
            }
            
            // Update navigation buttons
            document.getElementById('backBtn').disabled = stepIndex === -1;
            
            updateProgress();
        }

        function selectOption(questionIndex, option) {
            // Remove previous selection
            document.querySelectorAll(`#question-${questionIndex} .option`).forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Add selection to clicked option
            option.classList.add('selected');
            
            // Store answer
            answers[questionIndex] = parseInt(option.dataset.value);
            
            // Enable next button
            document.getElementById('nextBtn').disabled = false;
        }

        function nextStep() {
            if (currentStep === -1) {
                // Validate contact form
                if (validateForm()) {
                    // Store user info
                    userInfo = {
                        firstName: document.getElementById('firstName').value,
                        lastName: document.getElementById('lastName').value,
                        email: document.getElementById('email').value,
                        phone: document.getElementById('phone').value
                    };
                    currentStep = 0;
                    showStep(currentStep);
                }
            } else if (currentStep < totalQuestions - 1) {
                currentStep++;
                showStep(currentStep);
            } else {
                showResults();
            }
        }

        function previousStep() {
            if (currentStep > -1) {
                currentStep--;
                showStep(currentStep);
            }
        }

        function calculateScore() {
            totalScore = 0;
            for (let i = 0; i < totalQuestions; i++) {
                totalScore += answers[i] || 0;
            }
            return totalScore;
        }

        function getPersonaByScore(score) {
            for (const [name, data] of Object.entries(personaData)) {
                if (score >= data.range[0] && score <= data.range[1]) {
                    return { name, message: data.message };
                }
            }
            return { name: 'Strategic Investor', message: personaData['Strategic Investor'].message };
        }

        function showResults() {
            const finalScore = calculateScore();
            const persona = getPersonaByScore(finalScore);
            
            // Submit data to Google Sheets
            submitToGoogleSheets(finalScore, persona.name);
            
            // Hide questions and navigation
            document.querySelectorAll('.question-container').forEach(q => {
                q.classList.remove('active');
            });
            document.getElementById('navigation').style.display = 'none';
            
            // Show results
            document.getElementById('results').classList.add('active');
            document.getElementById('personaTitle').textContent = persona.name;
            document.getElementById('scoreValue').textContent = finalScore;
            document.getElementById('personaMessage').textContent = persona.message;
            
            // Update progress to 100%
            document.getElementById('progressFill').style.width = '100%';
        }

        function submitToGoogleSheets(score, persona) {
            // Prepare the data
            const formData = {
                timestamp: new Date().toISOString(),
                firstName: userInfo.firstName,
                lastName: userInfo.lastName,
                email: userInfo.email,
                phone: userInfo.phone,
                score: score,
                persona: persona,
                answers: answers
            };

            // Google Apps Script URL
            const scriptURL = 'https://script.google.com/macros/s/AKfycbx5f3gOtcHcrb3p2hjPlQkzq91jWUhN1eB2swybyWLEPGyZCFWaHGzrFUYSmd6Qwcpg/exec';
            
            fetch(scriptURL, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData)
            })
            .then(response => {
                console.log('Data submitted successfully');
            })
            .catch(error => {
                console.error('Error submitting data:', error);
            });
        }

        function restartSurvey() {
            currentStep = -1;
            answers = {};
            userInfo = {};
            totalScore = 0;
            
            // Reset UI
            document.getElementById('results').classList.remove('active');
            document.getElementById('navigation').style.display = 'flex';
            
            // Clear all selections
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Clear form
            document.querySelectorAll('.form-input').forEach(input => {
                input.value = '';
                input.classList.remove('error');
            });
            
            document.querySelectorAll('.validation-error').forEach(error => {
                error.style.display = 'none';
            });
            
            showStep(-1);
        }

        function bookCall() {
            // ShiftAlt Capital Calendly booking link
            window.open('https://calendly.com/shiftaltcap/30min', '_blank');
        }

        function joinWhatsApp() {
            // ShiftAlt Capital WhatsApp group link
            window.open('https://chat.whatsapp.com/BERyTM2pIB4GYs90Zzv2fU?mode=ac_t', '_blank');
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Form validation on input
            document.querySelectorAll('.form-input').forEach(input => {
                input.addEventListener('input', function() {
                    const allFilled = Array.from(document.querySelectorAll('.form-input')).every(inp => inp.value.trim());
                    document.getElementById('nextBtn').disabled = !allFilled;
                });
            });

            // Option click handlers
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const questionContainer = this.closest('.question-container');
                    const questionIndex = parseInt(questionContainer.id.split('-')[1]);
                    selectOption(questionIndex, this);
                });
            });
            
            // Initialize
            showStep(-1);
        });

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                if (!document.getElementById('nextBtn').disabled) {
                    nextStep();
                }
            } else if (e.key === 'Escape') {
                if (!document.getElementById('backBtn').disabled) {
                    previousStep();
                }
            }
        });
    </script>
</body>
</html>